<!DOCTYPE html>
<html lang="pt-br">

<head>
    <!-- METADATAS -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="Kauan Gabriel">
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="assets/css/cadastro.css">
    <!-- JS -->
    <script src="https://kit.fontawesome.com/fe41d20d0f.js" crossorigin="anonymous"></script>
    <!-- <script src="../assets/js/cadastro/cadastro.js"></script> -->
    <!-- TITLE -->
    <title>Project - Cadastro</title>
</head>

<body>

    <!-- HEADER -->

    <header>

        <nav>

            <article>
                <a href="index.html"><img src="assets/img/home/icon-controll.png" alt=""></a>
            </article>

            <ul>
                <li><a href="index.html#home">Inicio</a></li>

                <li><a href="index.html#sobre">Sobre</a></li>

                <li><a href="index.html#consoles">Consoles</a></li>

                <li><a href="index.html#games">Games</a></li>

                <li><a href="index.html#onu">Onu</a></li>
            </ul>

            <ul>
                <li><a href="cadastro.html"><i class="fa-solid fa-user"></i></a></li>
            </ul>

        </nav>

    </header>

    <main>

        <p>Nome</p>
        <input type="text" placeholder="Ex.: Kauan Gabriel" id="inp_nome">

        <p>Email</p>
        <input type="email" placeholder="Ex.: kauan@gmail.com" id="inp_email">

        <p>Senha</p>
        <input type="password" placeholder="Ex.: *********" id="inp_senha">

        <p>Confirmar Senha</p>
        <input type="password" placeholder="Ex.: *********" id="inp_confirmar">

        <button onclick="cadastrar()">Cadastrar</button>

    </main>

</body>

</html>

<script>

    function cadastrar() {

        // INPUTS

        var nomeVar = inp_nome.value;
        var emailVar = inp_email.value;
        var senhaVar = inp_senha.value;
        var confirmarVar = inp_confirmar.value;


        // VERIFICAÇÕES

        // VERIFICA SE OS CAMPOS ESTÃO PREENCHIDOS PARA PODER PROSSEGUIR

        if (nomeVar != '' || emailVar != '' || senhaVar != '' || confirmarVar != '') {

            // SENHA INCORRETA (CONFIRMAR É DIFERENTE DA SENHA)

            if (confirmarVar != senhaVar) {
                alert('senha incorreta!');
                return;
            }

        }

        else {
            alert('Preencha os Campos');
        }

        fetch("/usuario/cadastrar", {
            method: "POST",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                nomeServer: nomeVar,
                emailServer: emailVar,
                senhaServer: senhaVar
            }),
        })

            .then(function (resposta) {
                console.log("resposta: ", resposta);

                if (resposta.ok) {
                    console.log("Cadastro realizado com sucesso! Redirecionando para tela de Login...");

                    setTimeout(() => {
                        // window.location = "login.html";
                    }, "2000");
                } else {
                    throw "Houve um erro ao tentar realizar o cadastro!";
                }
            })
            .catch(function (resposta) {
                console.log(`#ERRO: ${resposta}`);
            });

        return false;
    }
</script>